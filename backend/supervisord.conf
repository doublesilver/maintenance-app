[supervisord]
nodaemon=true
user=root

[program:maintenance-backend]
command=/home/ec2-user/maintenance-app/backend/venv/bin/uvicorn main_v2:app --host 0.0.0.0 --port 8000
directory=/home/ec2-user/maintenance-app/backend
user=ec2-user
autostart=true
autorestart=true
stderr_logfile=/var/log/maintenance-backend.err.log
stdout_logfile=/var/log/maintenance-backend.out.log

[program:celery-worker]
command=/home/ec2-user/maintenance-app/backend/venv/bin/celery -A celery_app worker --loglevel=info
directory=/home/ec2-user/maintenance-app/backend
user=ec2-user
autostart=true
autorestart=true
stderr_logfile=/var/log/celery-worker.err.log
stdout_logfile=/var/log/celery-worker.out.log

[program:flower]
command=/home/ec2-user/maintenance-app/backend/venv/bin/celery -A celery_app flower --port=5555
directory=/home/ec2-user/maintenance-app/backend
user=ec2-user
autostart=true
autorestart=true
stderr_logfile=/var/log/flower.err.log
stdout_logfile=/var/log/flower.out.log
